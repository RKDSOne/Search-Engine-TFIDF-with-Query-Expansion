modulside box this module implements side box local yesno requiremoduleyesno local p function p mainframe local origargs framegetparent args local args for k v in pairsorigargs do v vmatchs s if v then argsk v end end return p mainargs end function p mainargs local data p makedataargs return p rendersideboxdata end function p makedataargs local data main table classes data classes if yesnoargs metadata false then table insertdata classes metadata end if args position and args positionlower left then table insertdata classes mboxsmallleft else table insertdata classes mboxsmall end table insertdata classes args class image if args image and args image none then data image args image end copy over data that doesnt need adjusting local argstocopy styles style textstyle above row above abovestyle body row text imageright below row below for i key in ipairsargstocopy do datakey argskey end return data end function p rendersideboxdata renders the sidebox html table root local root mw html createtable for i class in ipairsdata classes or do rootaddclassclass end rootcssborder 1px solid aaa backgroundcolor f9f9f9 if data style then rootcsstextdata style end the above row if data above then local abovecell rootnewlinetagtrtagtd abovecell attrcolspan data imageright and 3 or 2 addclassmboxtext if data textstyle then abovecellcsstextdata textstyle end if data abovestyle then abovecellcsstextdata abovestyle end abovecell newline wikitextdata above end the body row local bodyrow rootnewlinetagtrnewline if data image then bodyrowtagtd addclassmboximage wikitextdata image else bodyrowtagtdcsswidth 1px end local textcell bodyrownewlinetagtd textcelladdclassmboxtext plainlist if data textstyle then textcellcsstextdata textstyle end textcellwikitextdata text if data imageright then bodyrownewlinetagtd addclassmboximageright wikitextdata imageright end the below row if data below then local belowcell rootnewlinetagtrtagtd belowcell attrcolspan data imageright and 3 or 2 addclassmboxtext if data textstyle then belowcellcsstextdata textstyle end belowcellwikitextdata below end return tostringroot end return p 